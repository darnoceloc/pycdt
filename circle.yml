machine:
  timezone:
    America/Los_Angeles
  python:
    version: 2.7.11
dependencies:
  override:
    - easy_install -U setuptools
    - pip install -q numpy
    - pip install -r requirements.txt
    - pip install -r requirements-optional.txt
    - python setup.py develop
test:
  override:
    - find . -name "*.pyc" -exec rm '{}' \;
    - find . -name "test_*.py" -exec chmod -x '{}' \;
    #- python run_circle.py:
    #    timeout: 720
    - nosetests --config=nose.cfg --cover-html --cover-html-dir=$CIRCLE_ARTIFACTS:
    timeout: 720
    - coveralls
    # Some rudimentary command line tests for pmg
    - pmg convert test_files/Li2O.cif POSCAR.pmg
    - pmg convert POSCAR.pmg pmg.cif
    - pmg analyze -d test_files
